var Kilix={colors:{col1:"#61AFF0",col2:"#ff4a46",col3:"#009884",col4:"#e79027",col5:"#087ec2"},init:function(){Kilix.pushState(),Kilix.switchSVG(),Kilix.nav(),Kilix.wayPoints(),Kilix[$(".container").data("page")].init()},pushState:function(){function t(t){var a=t.url,i=$(".container").data("page");$("html, body").animate({scrollTop:0},500),o=s[t.title.toLowerCase()],$(".nav-link.current").removeClass("current"),$('.nav-link[data-pos="'+o+'"]').addClass("current"),e=o>n?!0:!1,$(".main-wrapper").append("<div class='wrapper wrapper-new'></div>"),e||$(".wrapper-new").addClass("wrapper-prev"),$(".wrapper-new").load(a+" .container",function(){$(".wrapper:first-child").transition({x:e?"-5%":"5%",opacity:0,delay:500},1200),$(".wrapper-new").css({opacity:0,x:e?"-5%":"5%"}).transition({x:"0%",opacity:1,delay:500},1200,function(){$(".wrapper:first-child").remove(),$(".wrapper-new").attr("style","").removeClass("wrapper-new"),$(".wrapper-prev").attr("style","").removeClass("wrapper-prev"),$(".nav-links-wrapper a, .footer-links a").addClass("enabled"),Pos=$(".container").data("pos")}),Kilix[i].destroy(),Kilix[t.title.toLowerCase()].init()})}function a(a){t(a)}"file:"===document.location.protocol&&alert("The HTML5 History API (and thus History.js) do not work on files, please upload it to a server.");var n,o,i=window.History,e=(i.getState(),!0),s={home:1,team:2,agilite:3,contact:4};i.Adapter.bind(window,"statechange",function(){var t=i.getState();i.log("statechange:",t.data,t.title,t.url),a(t)}),$(".nav-links-wrapper a.enabled, .footer-links a.enabled").on("click",function(t){t.preventDefault(),$(this).hasClass("enabled")&&($(".nav-links-wrapper a, .footer-links a").removeClass("enabled"),$("body").removeClass("unfolded"),n=$(".nav-link.current").data("pos"),i.pushState(null,this.textContent,this.href),t.preventDefault())})},switchSVG:function(){Modernizr.svg?$("img.svg").each(function(){var t=$(this),a=t.attr("id"),n=t.attr("class"),o=t.attr("src");$.get(o,function(o){var i=$(o).find("svg");"undefined"!=typeof a&&(i=i.attr("id",a)),"undefined"!=typeof n&&(i=i.attr("class",n+" replaced-svg")),i=i.removeAttr("xmlns:a"),t.replaceWith(i)})}):$('img.svg[src*="svg"]').attr("src",function(){return $(this).attr("src").replace(".svg",".png")})},nav:function(){$(".toggle-menu").on("click",function(){$(".nav-links-wrapper").removeClass("nav-links-hidden"),$("body").toggleClass("unfolded"),window.setTimeout(function(){$("body").hasClass("unfolded")||$(".nav-links-wrapper").addClass("nav-links-hidden")},605)}),$(".back-to-top").on("click",function(){$("html, body").animate({scrollTop:0},"slow")})},wayPoints:function(){$("footer").waypoint({handler:function(t){"down"==t?$(".back-to-top").addClass("force-opacity"):$(".back-to-top").removeClass("force-opacity")},offset:"bottom-in-view"})},changeXColor:function(t,a){"none"!=a?($(".logo").addClass("animated"),setTimeout(function(){$(".logo").removeClass("animated")},2e3),t.each(function(t){var n=$(this);setTimeout(function(){n.css("fill",a)},100*(t+1))})):($(".logo").addClass("animated"),setTimeout(function(){$(".logo").removeClass("animated")},2e3),t.each(function(t){var a=$(this);setTimeout(function(){a.attr("style","")},100*(t+1))}))},loadKilixSvg:function(){var t=Snap("#KILIX-logo");Snap.load("./assets/img/logo_big.svg",function(a){t.append(a.select("#kilixSvg"))})},animations:{},home:{init:function(){Kilix.loadKilixSvg(),Kilix.animations.extia.loadExtiaSvg();var t="25%";$(".landing-main-text").on("click",function(){$("html, body").animate({scrollTop:$(".svg-valeur").offset().top-90},"slow")}),$(".next-section").on("click",function(){$("html, body").animate({scrollTop:$(this).closest(".❤").next().offset().top-90},"slow")});var a=$(".❤");a.waypoint({handler:function(){var t=Kilix.colors[$(this).data("color")];Kilix.changeXColor($(".logo svg polygon"),t)},offset:"25%"}),$(".svg-valeur").waypoint(function(){$(".navbar").toggleClass("navbar-top")},{offset:"400px"});var n=!1;$(".svg-risque").waypoint(function(){0==n&&Kilix.animations.risques.start(),n=!0},{offset:t});var o=!1;Kilix.animations.valeur.setValueAnimStatus(!0),Kilix.animations.valeur.setValueLoadingStatus(!1),$(".svg-valeur").waypoint(function(){0==o&&Kilix.animations.valeur.start(),o=!0},{offset:t});var i=!1;Kilix.animations.amelioration.setAnimStatus(!1),$(".svg-amelio").waypoint(function(){0==i&&Kilix.animations.amelioration.start(),i=!0},{offset:t});var e=!1;Kilix.animations.extia.setValueAnimStatus(!1),$(".svg-extia").waypoint(function(){0==e&&Kilix.animations.extia.start(),e=!0},{offset:t}),console.log("Init Home")},destroy:function(){console.log("Destroy Home"),$(".svg-valeur").waypoint("destroy"),$(".svg-amelio").waypoint("destroy"),$(".svg-risque").waypoint("destroy"),$(".landing-main-text").off(),$(".next-section").off(),$(".navbar").addClass("navbar-top"),Kilix.changeXColor($(".logo svg polygon"),"none")}},agilite:{init:function(){Kilix.switchSVG(),$(".landing h1").on("click",function(){$("html, body").animate({scrollTop:$(".content").offset().top-100},"slow")}),$(".agility-item").waypoint({handler:function(){$(this).hasClass("checked")||($(this).find("li path").each(function(t){$(this).css("-webkit-transition-delay",.3*t+"s")}),$(this).addClass("checked"))},offset:"60%"});var t=!1;$(".svg-agilite").waypoint(function(){0==t&&(Kilix.animations.agilite.start(),t=!0)},{offset:"50%"});var a=!1;$(".svg-agilite").waypoint(function(){0==a&&(Kilix.animations.agilite.startSecond(),a=!0)},{offset:"25%"}),$(".content").waypoint(function(){$(".navbar").toggleClass("navbar-top")},{offset:"300px"}),console.log("Init AGILITY")},destroy:function(){console.log("Destroy AGILITY"),$(".landing h1").off(),$(".navbar").addClass("navbar-top"),$(".content").waypoint("destroy")}},team:{init:function(){console.log("Init Team");var t="25%";$(".cene").waypoint(function(){$(".navbar").toggleClass("navbar-top")},{offset:"400px"});var a=!1;$(".cene").waypoint(function(){0==a&&Kilix.animations.team.start(),a=!0},{offset:t})},destroy:function(){console.log("Destroy Team"),$(".cene").waypoint("destroy")}}};$(function(){console.log("init"),Kilix.init()});