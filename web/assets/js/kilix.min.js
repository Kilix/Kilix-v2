var Kilix={currentScroll:null,currentPos:null,colors:{col1:"#61AFF0",col2:"#ff4a46",col3:"#009884",col4:"#e79027",col5:"#087ec2"},init:function(){Kilix.resize(),Kilix.pushState(),Kilix.switchSVG(),Kilix.nav(),setTimeout(function(){Kilix[$(".container").data("page")].init()},300)},resize:function(){Kilix.resizeLanding(),$(window).resize(function(){Kilix.resizeLanding()})},resizeLanding:function(){var i=$(window).height();window.matchMedia("(min-width: 40em)").matches?($(".landing-home").css("height",i),$(".home .intro.desktop").css("margin-top",i)):($(".landing-home").attr("style",""),$(".home .intro.desktop").attr("style",""))},pushState:function(){function i(i){var n=i.url,o=$(".container").data("page");$("html, body").animate({scrollTop:0}),t=e[i.title.toLowerCase()],$(".nav-link.current").removeClass("current"),$('.nav-link[data-pos="'+t+'"]').addClass("current"),console.log(Kilix.currentPos+" et "+t),a=t>Kilix.currentPos?!0:!1,$(".main-wrapper").append("<div class='wrapper wrapper-new'></div>"),a||$(".wrapper-new").addClass("wrapper-prev"),$(".wrapper-new").load(n+" .container",function(){Kilix[o].destroy(),Kilix.resizeLanding(),Kilix.switchSVG();var n=$(".wrapper:first-child"),t=$(".wrapper-new"),e="page-fade",s=a?"page-moveFromRight":"page-moveFromLeft";n.addClass(e),t.addClass(s).addClass("page-ontop").on(l,function(){t.off(l),$(".wrapper:first-child").remove(),$(".wrapper").removeClass(s).removeClass("page-ontop"),$(".wrapper-new").removeClass("wrapper-new"),$(".wrapper-prev").removeClass("wrapper-prev"),$(".nav-links-wrapper a, .footer-links a").addClass("enabled"),Pos=$(".container").data("pos"),Kilix[i.title.toLowerCase()].init()})})}function n(n){i(n)}"file:"===document.location.protocol&&alert("The HTML5 History API (and thus History.js) do not work on files, please upload it to a server.");var t,o=window.History,a=(o.getState(),!0),e={home:1,team:2,agilite:3,contact:4},s={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},l=s[Modernizr.prefixed("animation")];Modernizr.cssanimations,o.Adapter.bind(window,"statechange",function(){var i=o.getState();n(i)}),$(".nav-links-wrapper a.enabled, .footer-links a.enabled").on("click",Kilix.bindPushState)},bindPushState:function(i){if(i.preventDefault(),$(this).hasClass("enabled")&&!$(this).hasClass("current")){$(".nav-links-wrapper a, .footer-links a").removeClass("enabled"),$("body").removeClass("unfolded"),Kilix.currentPos=$(".nav-link.current").data("pos"),Kilix.currentScroll=void 0!=$(this).data("scroll")?$(this).data("scroll"):null;var n=$(this).attr("data-scroll")?"Agilite":this.textContent;History.pushState(null,n,this.href),i.preventDefault()}},switchSVG:function(){Modernizr.svg?$("img.svg").each(function(){var i=$(this),n=i.attr("id"),t=i.attr("class"),o=i.attr("src");$.get(o,function(o){var a=$(o).find("svg");"undefined"!=typeof n&&(a=a.attr("id",n)),"undefined"!=typeof t&&(a=a.attr("class",t+" replaced-svg")),a=a.removeAttr("xmlns:a"),i.replaceWith(a)})}):$('img.svg[src*="svg"]').attr("src",function(){return $(this).attr("src").replace(".svg",".png")})},nav:function(){$(".toggle-menu").on("click",function(){$(".nav-links-wrapper").removeClass("nav-links-hidden"),$("body").toggleClass("unfolded"),window.setTimeout(function(){$("body").hasClass("unfolded")||$(".nav-links-wrapper").addClass("nav-links-hidden")},605)}),$(".back-to-top").on("click",function(){$("html, body").animate({scrollTop:0},"slow")}),$(".nav-link-contact").on("click",function(){$("html, body").animate({scrollTop:$("body").height()},"slow")})},wayPoints:function(){$("footer").waypoint({handler:function(i){"down"==i?$(".back-to-top").addClass("force-opacity"):$(".back-to-top").removeClass("force-opacity")},offset:"bottom-in-view"}),$(".intro").waypoint(function(){$(".navbar").toggleClass("navbar-top")},{offset:"100px"}),$(".landing h1, .landing-main-text, #KILIX-logo").on("click",function(){$("html, body").animate({scrollTop:$(".intro").offset().top-80},"slow")})},changeXColor:function(i,n){"none"!=n?($(".logo").addClass("animated"),setTimeout(function(){$(".logo").removeClass("animated")},2e3),i.each(function(i){var t=$(this);setTimeout(function(){t.css("fill",n)},100*(i+1))})):($(".logo").addClass("animated"),setTimeout(function(){$(".logo").removeClass("animated")},2e3),i.each(function(i){var n=$(this);setTimeout(function(){n.attr("style","")},100*(i+1))}))},animations:{},home:{init:function(){Kilix.wayPoints(),Kilix.resize(),$(".landing-home").addClass("play"),setTimeout(function(){$(".landing-home").removeClass("play")},1e3);var i="50%";$(".svg-anim a.button.enabled").on("click",Kilix.bindPushState),$(".next-section").on("click",function(){$("html, body").animate({scrollTop:$(this).closest(".❤").next().offset().top-90},"slow")}),$(".losange").on("click",function(){$("html, body").animate({scrollTop:$(".svg-valeur").offset().top-90},"slow")});var n=$(".❤");n.waypoint({handler:function(){var i=Kilix.colors[$(this).data("color")];Kilix.changeXColor($(".logo svg polygon"),i)},offset:"25%"});var t=!1;Kilix.animations.risques.setAnimStatus(!1),$(".svg-risque").waypoint(function(){0==t&&Kilix.animations.risques.start(),t=!0},{offset:i});var o=!1;Kilix.animations.valeur.setValueAnimStatus(!0),Kilix.animations.valeur.setValueLoadingStatus(!1),$(".svg-valeur").waypoint(function(){0==o&&Kilix.animations.valeur.start(),o=!0},{offset:i});var a=!1;Kilix.animations.amelioration.setAnimStatus(!1),$(".svg-amelio").waypoint(function(){0==a&&Kilix.animations.amelioration.start(),a=!0},{offset:i});var e=!1;Kilix.animations.extia.setAnimStatus(!1),$(".svg-extia").waypoint(function(){0==e&&Kilix.animations.extia.start(),e=!0},{offset:i})},destroy:function(){Kilix.animations.extia.freeIntervals(),Kilix.animations.valeur.freeIntervals(),Kilix.animations.risques.freeIntervals(),$.waypoints("destroy"),$(".svg-anim a.button.enabled").off(),$(".next-section").off(),$(".navbar").addClass("navbar-top"),Kilix.changeXColor($(".logo svg polygon"),"none"),$(".landing h1, .landing-main-text, #KILIX-logo").off()}},agilite:{init:function(){Kilix.wayPoints(),Kilix.switchSVG(),$(".losange").on("click",function(){$("html, body").animate({scrollTop:$(".content.desktop").offset().top-90},"slow")}),setTimeout(function(){Kilix.changeXColor($(".logo svg polygon"),"none")},300);var i=!1;$(".svg-agilite").eq("0").waypoint(function(){0==i&&(setTimeout(function(){Kilix.animations.agilite.startValueAnimation()},500),i=!0)},{offset:"70%"});var n=!1;$(".svg-agilite").eq("1").waypoint(function(){0==n&&(Kilix.animations.agilite.startRiskAnimation(),n=!0)},{offset:"70%"});var t=!1;$(".svg-agilite").eq("2").waypoint(function(){0==t&&(Kilix.animations.agilite.startAdaptAnimation(),t=!0)},{offset:"70%"});var o=!1;$(".svg-agilite").eq("3").waypoint(function(){0==o&&(Kilix.animations.agilite.startVisAnimation(),o=!0)},{offset:"70%"}),null!=Kilix.currentScroll&&$("html, body").animate({scrollTop:$(".agility-item").eq(Kilix.currentScroll).offset().top-110},"slow")},destroy:function(){$(".navbar").addClass("navbar-top"),$.waypoints("destroy"),Kilix.changeXColor($(".logo svg polygon"),"none"),$(".landing h1, .landing-main-text, #KILIX-logo").off()}},team:{init:function(){Kilix.wayPoints();var i="70%";$(".losange").on("click",function(){$("html, body").animate({scrollTop:$(".svg-anim").offset().top-90},"slow")});var n=!1;Kilix.animations.team.setAnimStatus(!1),$(".svg-anim").waypoint(function(){0==n&&Kilix.animations.team.start(),n=!0},{offset:i}),setTimeout(function(){Kilix.changeXColor($(".logo svg polygon"),Kilix.colors.col3)},300)},destroy:function(){$.waypoints("destroy"),$(".navbar").addClass("navbar-top"),$(".landing h1, .landing-main-text, #KILIX-logo").off(),Kilix.changeXColor($(".logo svg polygon"),"none")}}};$(function(){Kilix.init()});