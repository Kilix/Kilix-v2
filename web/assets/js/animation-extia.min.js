Kilix.animations.extia={animStatus:!1,powerLinesIntervals:new Array,colorInterval:null,riskInterval:null,setAnimStatus:function(i){Kilix.animations.extia.animStatus=i},freeIntervals:function(){window.clearInterval(Kilix.animations.extia.riskInterval),window.clearInterval(Kilix.animations.extia.colorInterval);for(var i in Kilix.animations.extia.powerLinesIntervals)window.clearInterval(i)},start:function(){function i(){y=m.valeurKart.attr("fill"),T=m.risqueRock.select("polygon").attr("fill"),K=m.amelioKart.attr("fill")}function t(){Snap.load("./assets/img/svg/kilix_anim_extia.svg",function(t){e(t),f.append(p),f.append(m.valeurText),f.append(m.risqueText),f.append(m.amelioText),i(),a()})}function e(i){p=i.select("#extia-factory"),m.reload=i.select("#extia-reload").attr({"fill-opacity":0}),m.logoExtia=i.select("#logo-extia").attr({"fill-opacity":0}),m.valeurText=i.select("#text-valeur"),m.valeurKart=i.select("#valeur-kart").attr({"fill-opacity":0}),m.valeurDispatch=i.select("#valeur-dispatch"),m.amelioText=i.select("#text-amelio"),m.amelioF1=i.select("#amelio-f1").attr({"fill-opacity":0}),m.amelioKart=i.select("#amelio-kart"),m.risqueText=i.select("#text-risques"),m.risquePanneau=i.select("#risque-panneau").attr({"fill-opacity":0}),m.risqueRock=i.select("#risque-rock").attr({"fill-opacity":0}),m.risqueTrajectoire=i.select("#risque-trajectoire").attr({"fill-opacity":0}),m.risquePointe=i.select("#risque-pointe").attr({"fill-opacity":0}),m.filValeur=i.select("#fil-valeur").select("path"),m.filRisque=i.select("#fil-risque").select("path"),m.filAmelio=i.select("#fil-amelio").select("path"),m.risquesMini=i.select("#risques-mini").attr({"fill-opacity":0}),m.valeurMini=i.select("#valeur-mini").attr({"fill-opacity":0}),m.amelioMini=i.select("#amelio-mini").attr({"fill-opacity":0})}function a(){bounce(m.logoExtia,700,700,function(){Kilix.animations.extia.colorInterval=colorPulse(m.logoExtia,v,600,700,function(){l()})})}function l(){c($("#fil-valeur path"),0),s(m.valeurText,y),setTimeout(function(){bounce(m.valeurMini,700,700),setTimeout(function(){m.valeurDispatch.animate({transform:"t0,s0,0"},100,function(){bounce(m.valeurKart,500,500,function(){setTimeout(function(){n()},500)})})},1e3)},600)}function n(){c($("#fil-risque path"),1),s(m.risqueText,T),setTimeout(function(){bounce(m.risquesMini,700,700,function(){m.risqueRock.animate({"fill-opacity":1},600,function(){bounce(m.risquePanneau,800),Kilix.animations.extia.riskInterval=scalePulse(m.risquePanneau,"1.2",500,1e3,function(){m.risquePointe.animate({"fill-opacity":1},500),m.risqueTrajectoire.animate({"fill-opacity":1},500,function(){setTimeout(function(){o()},500)})})})})},400)}function o(){c($("#fil-amelio path"),2),s(m.amelioText,K),setTimeout(function(){bounce(m.amelioKart,700,750,function(){m.amelioKart.attr({"fill-opacity":0}),bounce(m.amelioF1,1e3,1e3,function(){u(),Kilix.animations.extia.animStatus=!0,m.reload.animate({"fill-opacity":1},400)})})},400)}function r(){m.reload.animate({"fill-opacity":0},100,function(){m.valeurKart.animate({"fill-opacity":0},400),m.valeurMini.attr({"fill-opacity":0}),m.valeurDispatch.attr({transform:"t0,s1,1"}),m.risqueRock.animate({"fill-opacity":0},400),m.risquePointe.animate({"fill-opacity":0},400),m.risqueTrajectoire.animate({"fill-opacity":0},400),m.risquePanneau.animate({"fill-opacity":0},400),m.risquesMini.animate({"fill-opacity":0},400),m.amelioF1.animate({"fill-opacity":0},400),setTimeout(function(){l()},400)})}function c(i,t){i.css({stroke:x}),Kilix.animations.extia.powerLinesIntervals[t]=setInterval(function(){i.css({stroke:x})},500)}function s(i,t){var e=i.selectAll('[fill="#b8b8b8"]');for(var a in e)"function"==typeof e[a].animate&&e[a].animate({fill:t},500)}function u(){for(var i=m.valeurText.selectAll('[fill="'+y+'"]'),t=m.risqueText.selectAll('[fill="'+T+'"]'),e=m.amelioText.selectAll('[fill="'+K+'"]'),a=i.length-1;a>=0;a--)i[a].animate({fill:q},500);for(var a=t.length-1;a>=0;a--)t[a].animate({fill:q},500);for(var a=e.length-1;a>=0;a--)e[a].animate({fill:q},500)}var f=Snap("#EXTIA-animation"),m=new Array,p=null,x="#FFFFFF",v="#E6B171",q="#b8b8b8",y=null,T=null,K=null;$("#EXTIA-animation").on("click",function(){1==Kilix.animations.extia.animStatus&&(Kilix.animations.extia.animStatus=!1,r())}),t()}};