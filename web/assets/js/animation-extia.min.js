Kilix.animations.extia={animStatus:!1,powerLinesIntervals:new Array,colorInterval:null,riskInterval:null,setAnimStatus:function(a){Kilix.animations.extia.animStatus=a},freeIntervals:function(){window.clearInterval(Kilix.animations.extia.riskInterval),window.clearInterval(Kilix.animations.extia.colorInterval);for(var a in Kilix.animations.extia.powerLinesIntervals)window.clearInterval(a)},start:function(){function a(){r=m.valeurKart.attr("fill"),s=m.risqueRock.select("polygon").attr("fill"),t=m.amelioKart.attr("fill")}function b(){Snap.load("./assets/img/svg/kilix_anim_extia.svg",function(b){c(b),l.append(n),l.append(m.valeurText),l.append(m.risqueText),l.append(m.amelioText),a(),d()})}function c(a){n=a.select("#extia-factory"),m.reload=a.select("#extia-reload").attr({"fill-opacity":0}),m.logoExtia=a.select("#logo-extia").attr({"fill-opacity":0}),m.valeurText=a.select("#text-valeur"),m.valeurKart=a.select("#valeur-kart").attr({"fill-opacity":0}),m.valeurDispatch=a.select("#valeur-dispatch"),m.amelioText=a.select("#text-amelio"),m.amelioF1=a.select("#amelio-f1").attr({"fill-opacity":0}),m.amelioKart=a.select("#amelio-kart"),m.risqueText=a.select("#text-risques"),m.risquePanneau=a.select("#risque-panneau").attr({"fill-opacity":0}),m.risqueRock=a.select("#risque-rock").attr({"fill-opacity":0}),m.risqueTrajectoire=a.select("#risque-trajectoire").attr({"fill-opacity":0}),m.risquePointe=a.select("#risque-pointe").attr({"fill-opacity":0}),m.filValeur=a.select("#fil-valeur").select("path"),m.filRisque=a.select("#fil-risque").select("path"),m.filAmelio=a.select("#fil-amelio").select("path"),m.risquesMini=a.select("#risques-mini").attr({"fill-opacity":0}),m.valeurMini=a.select("#valeur-mini").attr({"fill-opacity":0}),m.amelioMini=a.select("#amelio-mini").attr({"fill-opacity":0})}function d(){bounce(m.logoExtia,700,700,function(){Kilix.animations.extia.colorInterval=colorPulse(m.logoExtia,p,600,700,function(){e()})})}function e(){i($("#fil-valeur path"),0),j(m.valeurText,r),setTimeout(function(){bounce(m.valeurMini,700,700),setTimeout(function(){m.valeurDispatch.animate({transform:"t0,s0,0"},100,function(){bounce(m.valeurKart,500,500,function(){setTimeout(function(){f()},500)})})},1e3)},600)}function f(){i($("#fil-risque path"),1),j(m.risqueText,s),setTimeout(function(){bounce(m.risquesMini,700,700,function(){m.risqueRock.animate({"fill-opacity":1},600,function(){bounce(m.risquePanneau,800),Kilix.animations.extia.riskInterval=scalePulse(m.risquePanneau,"1.2",500,1e3,function(){m.risquePointe.animate({"fill-opacity":1},500),m.risqueTrajectoire.animate({"fill-opacity":1},500,function(){setTimeout(function(){g()},500)})})})})},400)}function g(){i($("#fil-amelio path"),2),j(m.amelioText,t),setTimeout(function(){bounce(m.amelioKart,700,750,function(){m.amelioKart.attr({"fill-opacity":0}),bounce(m.amelioF1,1e3,1e3,function(){k(),Kilix.animations.extia.animStatus=!0,m.reload.animate({"fill-opacity":1},400)})})},400)}function h(){m.reload.animate({"fill-opacity":0},100,function(){m.valeurKart.animate({"fill-opacity":0},400),m.valeurMini.attr({"fill-opacity":0}),m.valeurDispatch.attr({transform:"t0,s1,1"}),m.risqueRock.animate({"fill-opacity":0},400),m.risquePointe.animate({"fill-opacity":0},400),m.risqueTrajectoire.animate({"fill-opacity":0},400),m.risquePanneau.animate({"fill-opacity":0},400),m.risquesMini.animate({"fill-opacity":0},400),m.amelioF1.animate({"fill-opacity":0},400),setTimeout(function(){e()},400)})}function i(a,b){a.css({stroke:o}),Kilix.animations.extia.powerLinesIntervals[b]=setInterval(function(){a.css({stroke:o})},500)}function j(a,b){var c=a.selectAll('[fill="#b8b8b8"]');for(var d in c)"function"==typeof c[d].animate&&c[d].animate({fill:b},500)}function k(){for(var a=m.valeurText.selectAll('[fill="'+r+'"]'),b=m.risqueText.selectAll('[fill="'+s+'"]'),c=m.amelioText.selectAll('[fill="'+t+'"]'),d=a.length-1;d>=0;d--)a[d].animate({fill:q},500);for(var d=b.length-1;d>=0;d--)b[d].animate({fill:q},500);for(var d=c.length-1;d>=0;d--)c[d].animate({fill:q},500)}var l=Snap("#EXTIA-animation"),m=new Array,n=null,o="#FFFFFF",p="#E6B171",q="#b8b8b8",r=null,s=null,t=null;$("#EXTIA-animation").on("click",function(){1==Kilix.animations.extia.animStatus&&(Kilix.animations.extia.animStatus=!1,h())}),b()}};